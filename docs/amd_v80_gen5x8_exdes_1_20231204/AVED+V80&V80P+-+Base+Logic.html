<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/><meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->
<script charset="UTF-8" data-document-language="true" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" type="text/javascript"></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script class="optanon-category-C0002" type="text/plain">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
<title>AVED V80/V80P - Base Logic — AVED  documentation</title>
<link href="_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="_static/css/theme.css" rel="stylesheet" type="text/css"/>
<link href="_static/custom.css" rel="stylesheet" type="text/css"/>
<link href="_static/xbtest.css" rel="stylesheet" type="text/css"/>
<link href="_static/_static/custom.css" rel="stylesheet" type="text/css"/>
<link href="https://docs.xilinx.com/favicon.ico" rel="shortcut icon"/>
<!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
<script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
<script src="_static/jquery.js"></script>
<script src="_static/underscore.js"></script>
<script src="_static/doctools.js"></script>
<script src="_static/js/theme.js"></script>
<link href="genindex.html" rel="index" title="Index"/>
<link href="search.html" rel="search" title="Search"/>
<link href="AVED%2BV80%26V80P%2B-%2BClock%2BReset%2BModule.html" rel="next" title="AVED V80/V80P - Clock Reset Module"/>
<link href="AVED%2BV80%26V80P%2B-%2BNoC%2BConfiguration.html" rel="prev" title="AVED V80/V80P - NoC Configuration"/>
<link href="_static/conf.css" rel="stylesheet" type="text/css"/></head>
<body class="wy-body-for-nav">
<!-- Google Tag Manager -->
<noscript><iframe class="optanon-category-C0002" height="0" src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" style="display:none;visibility:hidden" width="0"></iframe></noscript>
<!-- End Google Tag Manager -->
<div class="wy-grid-for-nav">
<nav class="wy-nav-side" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href="index.html"> AVED
            <img alt="Logo" class="logo" src="_static/xilinx-header-logo.svg"/>
</a>
<div role="search">
<form action="search.html" class="wy-form" id="rtd-search-form" method="get">
<input name="q" placeholder="Search docs" type="text"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div><div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<p class="caption" role="heading"><span class="caption-text">AVED v80 Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BOverview.html">AVED Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AVED Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="How-to%2Binstall%2Band%2Brun%2Ba%2Bpre-built%2BAVED%2Bdesign%2Bon%2Ban%2BALVEO%2Bcard.html">How-to install and run a pre-built AVED design on an ALVEO card</a></li>
<li class="toctree-l1"><a class="reference internal" href="How-to%2BRebuild%2Ban%2BAVED%2BDesign%2Bfor%2BYourself.html">How-to Rebuild an AVED Design for Yourself</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AVED System Architecture</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AVED%2B-%2BBoard%2BManagement%2BSolution.html">AVED - Board Management Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2B-%2BDevice%2BProgramming.html">AVED - Device Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2B-%2BHost%2Bto%2BCard%2BCommunication.html">AVED - Host to Card Communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2B-%2BUser%2BApplication.html">AVED - User Application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AVED Deployment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BDeployment%2BArchive.html">AVED Deployment Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BInstalling%2Bthe%2BDeployment%2Bpackage%2Bonto%2Bthe%2BHost%2BServer.html">AVED Installing the Deployment package onto the Host Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BInstalling%2Bthe%2BDesign%2Bonto%2Bthe%2BCard.html">AVED Installing the Design onto the Card</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BUpdating%2BFPT%2BImage%2Bin%2BFlash.html">AVED Updating FPT Image in Flash</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BUpdating%2BDesign%2BPDI%2Bin%2BFlash.html">AVED Updating Design PDI in Flash</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BDebug%2BTechniques.html">AVED Debug Techniques</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BJTAG%2BBoot%2BRecovery.html">AVED JTAG Boot Recovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BManagement%2BInterface%2Buserguide%2B%28ami_tool%29.html">AVED Management Interface userguide (ami_tool)</a></li>
<li class="toctree-l1"><a class="reference internal" href="xbtest/user-guide/source/index.html">Xbtest Userguide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BBuild%2BScripts.html">AVED Build Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Source%2BConfiguration%2BControl.html">Source Configuration Control</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware Design - V80/V80P</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="AVED%2BV80%26V80P%2B-%2BHierarchy%2BOverview.html">AVED V80/V80P - Hierarchy Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BV80%26V80P%2B-%2BCIPS%2BConfiguration.html">AVED V80/V80P - CIPS Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BV80%26V80P%2B-%2BMemory%2BResources.html">AVED V80/V80P - Memory Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BV80%26V80P%2B-%2BMemory%2BMap.html">AVED V80/V80P - Memory Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BV80%26V80P%2B-%2BNoC%2BConfiguration.html">AVED V80/V80P - NoC Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">AVED V80/V80P - Base Logic</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#uuid-rom">UUID ROM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hardware-discovery">Hardware Discovery</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-config">General Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pf0-configuration">PF0 Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pf0-entry-0">PF0 Entry 0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pf0-entry-1">PF0 Entry 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pf0-entry-2">PF0 Entry 2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hardware-discovery-ip-gui-configuration">Hardware Discovery IP GUI configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generic-command-queue-management-to-rpu-gcq-m2r">Generic Command Queue Management-to-RPU (gcq_m2r)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rpu-smart-connect-rpu-sc">RPU Smart Connect (rpu_sc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pcie-slr0-management-smartconnect-pcie-slr0-mgmt-sc">PCIe SLR0 Management SmartConnect (pcie_slr0_mgmt_sc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#smbus-ip-axi-smbus-rpu">SMBus IP (axi_smbus_rpu)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BV80%26V80P%2B-%2BClock%2BReset%2BModule.html">AVED V80/V80P - Clock Reset Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BV80%26V80P%2B-%2BSource%2BFile%2BOverview.html">AVED V80/V80P - Source File Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BV80%26V80P%2B-%2BXBTEST%2BDesign.html">AVED V80/V80P - XBTEST Design</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Generic%2BCommand%2BQueue%2BIP%2Bv2.0%2B-%2BProduct%2BGuide.html">Generic Command Queue IP v2.0 - Product Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hardware%2BDiscovery%2BIP%2Bv1.0%2B-%2BProduct%2BGuide.html">Hardware Discovery IP v1.0 - Product Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Firmware Design - AVED</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BManagement%2BController%2B%28AMC%29%2B-%2BArchitecture%2Band%2BDesign.html">AVED Management Controller (AMC) - Architecture and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BClock%2BControl%2B%28ACC%29%2BProxy%2BDriver.html">AVED Clock Control (ACC) Proxy Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BInBand%2BTelemetry%2BApplication.html">AVED InBand Telemetry Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BManagement%2BInterface%2B%28AMI%29%2BProxy%2BDriver.html">AVED Management Interface (AMI) Proxy Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BProgramming%2BControl%2B%28APC%29%2BProxy%2BDriver.html">AVED Programming Control (APC) Proxy Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BSensor%2BControl%2B%28ASC%29%2BProxy%2BDriver.html">AVED Sensor Control (ASC) Proxy Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BExternal%2BDevice%2BControl%2B%28AXC%29%2BProxy%2BDriver.html">AVED External Device Control (AXC) Proxy Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="Firmware%2BInterface%2B%28FW_IF%29%2BAbstraction%2BLayer.html">Firmware Interface (FW_IF) Abstraction Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="Operating%2BSystem%2BAbstraction%2BLayer%2B%28OSAL%29.html">Operating System Abstraction Layer (OSAL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Profiles%2Band%2BCMake%2Bbuild%2Bprocess.html">Profiles and CMake build process</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Services (AMI &amp; xbtest)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BManagement%2BInterface%2B%28AMI%29.html">AVED Management Interface (AMI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="xbtest%2Bbuild.html">xbtest build</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AVED%2B-%2BList%2Bof%2BAbbreviations.html">AVED - List of Abbreviations</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVED%2BRelease%2BInformation.html">AVED Release Information</a></li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift"><nav aria-label="Mobile navigation menu" class="wy-nav-top" style="background: black">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="index.html">AVED</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="Page navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a class="icon icon-home" href="index.html"></a> »</li>
<li>AVED V80/V80P - Base Logic</li>
<li class="wy-breadcrumbs-aside">
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div itemprop="articleBody">
<section id="aved-v80-v80p-base-logic">
<h1>AVED V80/V80P - Base Logic<a class="headerlink" href="#aved-v80-v80p-base-logic" title="Permalink to this headline">¶</a></h1>
<section id="overview">
<span id="avedv80-v80pbaselogic-overview"></span><h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The base logic contains the management functionality of the AVED design. It is comprised of the hardware discovery IP, UUID ROM IP, management-to-RPU generic command queue IP, the PCIe management SmartConnect IP and the RPU SmartConnect IP.</p>
<p>From a PCIe perspective, management is achieved through the use of the physical function (PF0). This physical function is reserved for those with administrator privileges, protecting card management from other user functions, such as accelerator
functions. AVED does not enable the User Physical Function.</p>
<p><img alt="image1" class="confluence-embedded-image" src="_images/1137226633.png"/></p>
<div class="line-block">
<div class="line"><br/></div>
</div>
</section>
<section id="uuid-rom">
<span id="avedv80-v80pbaselogic-uuidrom"></span><h2>UUID ROM<a class="headerlink" href="#uuid-rom" title="Permalink to this headline">¶</a></h2>
<p>AVED uses a UUID ROM in the base logic of the design to store the universally unique identifier (UUID). The UUID is comprised of a 32 character hexadecimal string (128-bit), calculated using a MD5 checksum, that uniquely identifies the implemented
design. Any change in the AVED design, placement, or routing will result in a different UUID value. The UUID value is automatically inserted in the UUID ROM (LUTRAM) of the routed DCP. Upon programming the AMD Versal™ device with the PDI, the AMD
Alveo™ management interface (AMI) uses the UUID to ensure compatibility with other packages such as xbtest.</p>
</section>
<section id="hardware-discovery">
<span id="avedv80-v80pbaselogic-hardwarediscovery"></span><h2>Hardware Discovery<a class="headerlink" href="#hardware-discovery" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="Hardware+Discovery+IP+v1.0+-+Product+Guide.html">Versal Hardware Discovery IP</a> enables functionality to assist software with discovery of available features and peripheral address offsets within the configured AVED design at startup. It
implements the PCIe vendor specific extended capability (VSEC) structure within the extended configuration space of the PCIe IP, which indicates the memory-mapped location of the BAR layout table. The BAR layout table contains all of the PCIe
endpoints found on each Physical Function (PF) in the system, along with information needed for accessing each endpoint.</p>
<p>AVED configures the hardware discovery IP with the management BAR layout table with pointers to identify:</p>
<ol class="arabic simple">
<li><p>The downloaded Versal device’s PDI by querying the embedded hardware UUID.</p></li>
<li><p>The location of gcq_m2r to establish inter-PF and RPU communications.</p></li>
<li><p>The location of the GCQ buffer in DDR memory for host/RPU communication.</p></li>
</ol>
<p>AVED uses the Management BAR Layout Table (PF0) configured with these entries:</p>
<table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh" scope="col">PF0 Entry</th><th class="confluenceTh" scope="col">IP Name</th><th class="confluenceTh" scope="col">Start Address</th><th class="confluenceTh" scope="col">End Address</th></tr><tr><td class="confluenceTd">0</td><td class="confluenceTd">UUID ROM</td><td class="confluenceTd">0x201_0100_1000</td><td class="confluenceTd">0x201_0100_1FFF</td></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">gcq_m2r</td><td class="confluenceTd">0x201_0101_0000</td><td class="confluenceTd">0x201_0101_0FFF</td></tr><tr><td class="confluenceTd">2</td><td class="confluenceTd"><p>PCIe Host to DDR remap in axi_noc_cips</p><p>Remaps PCIe Address</p><p style="margin-left: 40.0px;">0x201_0800_0000 - 0x201_0FFF_FFFF</p><p>to DDR Address</p><p style="margin-left: 40.0px;">0x000_03800_0000 - 0x000_3FFF_FFFF</p></td><td class="confluenceTd"><p>0x201_0800_0000 </p></td><td class="confluenceTd"><p>0x201_0FFF_FFFF</p></td></tr></tbody></table>
<p>AVED does not use the User BAR layout table.</p>
<section id="general-config">
<span id="avedv80-v80pbaselogic-generalconfig"></span><h3>General Config<a class="headerlink" href="#general-config" title="Permalink to this headline">¶</a></h3>
<p>The hardware discovery IP is manually configured. AVED sets the PCIe Extended Capability Base Address to 0x600 and the next capability Pointer is set to 0x000 to indicate this is the last capability in the extended capability address space. Since the
hardware discovery IP is manually configured, the ‘PF0 List of Endpoints Names’ does not need to be entered.</p>
</section>
<section id="pf0-configuration">
<span id="avedv80-v80pbaselogic-pf0configuration"></span><h3>PF0 Configuration<a class="headerlink" href="#pf0-configuration" title="Permalink to this headline">¶</a></h3>
<p>The configuration for the three BAR entries must be entered. The <a class="reference external" href="AVED+V80&amp;V80P+-+CIPS+Configuration.html">PF0 BAR</a> is configured with an offset of 0x201_0000_0000, so the 0x201_xxxx_xxxx is not entered in the address entries of this tab.</p>
<section id="pf0-entry-0">
<span id="avedv80-v80pbaselogic-pf0entry0"></span><h4>PF0 Entry 0<a class="headerlink" href="#pf0-entry-0" title="Permalink to this headline">¶</a></h4>
<p>This is the entry for the UUID ROM.</p>
<ul class="simple">
<li><p>Type: 0x50 = UUID ROM</p></li>
<li><p>BAR: PF0 BAR Endpoint</p></li>
<li><p>Address: Endpoint address offset from the PCIe BAR identified in the BAR field. The <a class="reference external" href="AVED+V80&amp;V80P+-+CIPS+Configuration.html">PF0 BAR</a> is configured with an offset of 0x201_0000_0000.</p></li>
<li><p>Version Type: IP Catalog Version</p></li>
<li><p>Major Version: Major Version of the IP</p></li>
<li><p>Minor Version: Minor Version of the IP</p></li>
<li><p>Reserved: Leave at default setting.</p></li>
</ul>
</section>
<section id="pf0-entry-1">
<span id="avedv80-v80pbaselogic-pf0entry1"></span><h4>PF0 Entry 1<a class="headerlink" href="#pf0-entry-1" title="Permalink to this headline">¶</a></h4>
<p>This is the entry for the GCQ - gcq_m2r.</p>
<ul class="simple">
<li><p>Type 0x54 = GCQ</p></li>
<li><p>BAR: PF0 BAR Endpoint</p></li>
<li><p>Address: Endpoint address offset from the PCIe BAR identified in the BAR field. The <a class="reference external" href="AVED+V80&amp;V80P+-+CIPS+Configuration.html">PF0 BAR</a> is configured with an offset of 0x201_0000_0000.</p></li>
<li><p>Version Type: IP Catalog Version</p></li>
<li><p>Major Version: Major Version of the IP</p></li>
<li><p>Minor Version: Minor Version of the IP</p></li>
<li><p>Reserved: Leave at default setting.</p></li>
</ul>
</section>
<section id="pf0-entry-2">
<span id="avedv80-v80pbaselogic-pf0entry2"></span><h4>PF0 Entry 2<a class="headerlink" href="#pf0-entry-2" title="Permalink to this headline">¶</a></h4>
<p>This is the entry for the remapper between the Host PCIe management and RPU in the DDR.</p>
<ul class="simple">
<li><p>Type 0x55 = AXI NoC IP Remapper</p></li>
<li><p>BAR: PF0 BAR Endpoint</p></li>
<li><p>Address: Endpoint address offset from the PCIe BAR identified in the BAR field. The <a class="reference external" href="AVED+V80&amp;V80P+-+CIPS+Configuration.html">PF0 BAR</a> is configured with an offset of 0x201_0000_0000.</p></li>
<li><p>Version Type: IP Catalog Version</p></li>
<li><p>Major Version: Major Version of the IP</p></li>
<li><p>Minor Version: Minor Version of the IP</p></li>
<li><p>Reserved: Leave at default setting.</p></li>
</ul>
<div class="line-block">
<div class="line"><br/></div>
</div>
</section>
</section>
<section id="hardware-discovery-ip-gui-configuration">
<span id="avedv80-v80pbaselogic-hardwarediscoveryipguiconfiguration"></span><h3>Hardware Discovery IP GUI configuration<a class="headerlink" href="#hardware-discovery-ip-gui-configuration" title="Permalink to this headline">¶</a></h3>
<p><img alt="image2" class="confluence-embedded-image" src="_images/1126395505.png"/></p>
<p><img alt="image3" class="confluence-embedded-image" src="_images/1126395506.png"/></p>
</section>
</section>
<section id="generic-command-queue-management-to-rpu-gcq-m2r">
<span id="avedv80-v80pbaselogic-genericcommandqueuemanagement-to-rpu-gcq-m2r"></span><h2>Generic Command Queue Management-to-RPU (gcq_m2r)<a class="headerlink" href="#generic-command-queue-management-to-rpu-gcq-m2r" title="Permalink to this headline">¶</a></h2>
<p>The AVED gcq_m2r instantiates the <a class="reference external" href="Generic+Command+Queue+IP+v2.0+-+Product+Guide.html">Generic Command Queue IP</a> to allow the PCIe management and RPU to communicate with each other using 128 MB of DDR4 shared memory. The communication is performed
through the the use of two AXI4-Lite interfaces that provide access to the queue status/control registers contained within the GCQ IP. In the GCQ IP, the Producer is connected to the Submission Queue (SQ) interface (S00_AXI). It generates the
submission queue interrupt (irq_sq). The Consumer is connected to the Completion Queue (CQ) interface (S01_AXI). It generates the completion queue interrupt (irq_cq). In gcq_m2r, the producer is the PCIe Management, and the consumer is the RPU. The
SQ and CQ ring buffers are contained in DDR memory shared between the PCIe management PF &amp; RPU - <a class="reference external" href="AVED+V80&amp;V80P+-+Memory+Map.html">gcq_m2r DDR location</a>. The AVED design connects the submission queue interrupt to the CIPS LPD PL-PS interrupt (IRQ
0) so it can be serviced by the RPU. The consumer queue interrupt is not used.</p>
<div class="line-block">
<div class="line"><br/></div>
</div>
<p><a class="confluence-embedded-image reference internal" href="_images/1126377469.png"><img alt="image4" class="confluence-embedded-image" src="_images/1126377469.png" style="height: 250px;"/></a></p>
</section>
<section id="rpu-smart-connect-rpu-sc">
<span id="avedv80-v80pbaselogic-rpusmartconnect-rpu-sc"></span><h2>RPU Smart Connect (rpu_sc)<a class="headerlink" href="#rpu-smart-connect-rpu-sc" title="Permalink to this headline">¶</a></h2>
<p>The AVED RPU SmartConnect (rpu_sc) block allows the RPU to communicate to the base logic RPU peripherals through the <a class="reference external" href="https://docs.xilinx.com/r/en-US/pg247-smartconnect/SmartConnect-v1.0-LogiCORE-IP-Product-Guide">AXI SmartConnect IP</a>. The AXI
SmartConnect IP is instantiated inside rpu_sc and it is responsible for connecting one or more AXI memory-mapped master devices to one or more memory-mapped AXI slave devices. In this case, it connects the CIPS Master AXI Low Power Domain (M_AXI_LPD)
interface of the RPU, to the base logic RPU slave peripherals (gcq_m2r and axi_smbus_rpu). This interface operates at 100MHz.</p>
</section>
<section id="pcie-slr0-management-smartconnect-pcie-slr0-mgmt-sc">
<span id="avedv80-v80pbaselogic-pcieslr0managementsmartconnect-pcie-slr0-mgmt-sc"></span><h2>PCIe SLR0 Management SmartConnect (pcie_slr0_mgmt_sc)<a class="headerlink" href="#pcie-slr0-management-smartconnect-pcie-slr0-mgmt-sc" title="Permalink to this headline">¶</a></h2>
<p>The AVED PCIe SLR0 Management SmartConnect (pcies_slr0_mgmt_sc) block allows the RPU, PMC, and Host to communicate to the base logic management peripherals through the <a class="reference external" href="https://docs.xilinx.com/r/en-US/pg247-smartconnect/SmartConnect-v1.0-LogiCORE-IP-Product-Guide">AXI SmartConnect
IP</a>. In this case, it connects the CIPS RPU, PMC, and Host master AXI devices, from axi_noc_cips, to the base logic management slave AXI devices
(hw_discovery, uuid_rom, gcq_m2r, and pcie_mgmt_pdi_reset). This interface operates at 100MHz.</p>
</section>
<section id="smbus-ip-axi-smbus-rpu">
<span id="avedv80-v80pbaselogic-smbusip-axi-smbus-rpu"></span><h2>SMBus IP (axi_smbus_rpu)<a class="headerlink" href="#smbus-ip-axi-smbus-rpu" title="Permalink to this headline">¶</a></h2>
<p>AVED instantiates the SMBus IP. This allows AVED to communicate with external devices sharing the two-wire open drain interface operating on the same principles as I2C. The SMBus IP is controlled by the AXI4-Lite interface running at 100MHz. Its
interrupt is connected to the CIPS LPD PL-PS interrupt (IRQ 1) so it can be serviced by the RPU. Its I/O is located in bank 702 and connects to the PCIe edge connector per the schematic.</p>
<p><strong>NOTE:</strong> SMBus IP is NOT yet available in the hardware design.</p>
<div class="line-block">
<div class="line"><br/></div>
</div>
<p>Page Revision: v. 39</p>
</section>
</section>
</div>
</div>
<footer><div aria-label="Footer" class="rst-footer-buttons" role="navigation">
<a accesskey="p" class="btn btn-neutral float-left" href="AVED%2BV80%26V80P%2B-%2BNoC%2BConfiguration.html" rel="prev" title="AVED V80/V80P - NoC Configuration"><span aria-hidden="true" class="fa fa-arrow-circle-left"></span> Previous</a>
<a accesskey="n" class="btn btn-neutral float-right" href="AVED%2BV80%26V80P%2B-%2BClock%2BReset%2BModule.html" rel="next" title="AVED V80/V80P - Clock Reset Module">Next <span aria-hidden="true" class="fa fa-arrow-circle-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<p>© Copyright 2023, Advanced Micro Devices Inc.</p>
</div>
<div class="aem-Grid aem-Grid--16">
<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
<div class="container-fluid sub-footer">
<div class="row">
<div class="col-xs-24">
<p><a href="https://www.amd.com/en/corporate/copyright" target="_blank">Terms and Conditions</a> | <a href="https://www.amd.com/en/corporate/privacy" target="_blank">Privacy</a> | <a href="https://www.amd.com/en/corporate/cookies" target="_blank">Cookie Policy</a> | <a href="https://www.amd.com/en/corporate/trademarks" target="_blank">Trademarks</a> | <a href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf" target="_blank">Statement on Forced Labor</a> | <a href="https://www.amd.com/en/corporate/competition" target="_blank">Fair and Open Competition</a> | <a href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf" target="_blank">UK Tax Strategy</a> | <a href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA" target="_blank">Inclusive Terminology</a> | <a class="ot-sdk-show-settings" href="#cookiessettings">Cookies Settings</a></p>
</div>
</div>
</div>
</div>
</div>



  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
</div>
</div>
</section>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>
</body>
</html>